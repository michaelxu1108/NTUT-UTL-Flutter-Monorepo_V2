# æ‰‹ç’° App - æ³¢å½¢åç§»æ§åˆ¶åŠŸèƒ½

**æ—¥æœŸ**: 2025-12-21
**ç›®æ¨™**: å¯¦ä½œæ³¢å½¢åç§»èª¿æ•´åŠŸèƒ½ï¼Œè§£æ±ºå¤šæ¢æ³¢å½¢é‡ç–Šé›£ä»¥è¾¨è­˜çš„å•é¡Œ

---

## ğŸ” å•é¡Œåˆ†æ

### ä½¿ç”¨è€…éœ€æ±‚

**å ´æ™¯æè¿°**ï¼š
ç•¶ 4 é¡† MLX90393 æ„Ÿæ¸¬å™¨ï¼ˆæ‹‡æŒ‡ã€é£ŸæŒ‡ã€ä¸­æŒ‡ã€ç„¡åæŒ‡ï¼‰çš„ X è»¸è³‡æ–™åœ¨ã€Œå…¨éƒ¨ã€åˆ†é ä¸­åŒæ™‚é¡¯ç¤ºæ™‚ï¼Œå¦‚æœæ•¸å€¼ç¯„åœç›¸è¿‘ï¼Œæ³¢å½¢æœƒé‡ç–Šåœ¨ä¸€èµ·ï¼Œé›£ä»¥å€åˆ†ã€‚

**åŸå§‹ç‹€æ…‹**ï¼š
```
åœ–è¡¨ Y è»¸ç¯„åœ: 30000 - 35000

35000 â”¤  â•±â•²â•±â•²â•±â•²â•±â•²    â† æ‰€æœ‰æ³¢å½¢éƒ½é‡ç–Š
      â”‚ â•±  â•²  â•²  â•²
34000 â”¤â•±    â•²    â•²  â•²   é›£ä»¥å€åˆ†å“ªæ¢æ˜¯å“ªå€‹æ„Ÿæ¸¬å™¨
      â”‚      â•²    â•²
33000 â”¤       â•²    â•²
      â”‚        â•²
32000 â”¤         â•²
      â”‚
31000 â”¤
      â”‚
30000 â”¤
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ™‚é–“
```

**æœŸæœ›æ•ˆæœ**ï¼š
```
åœ–è¡¨ Y è»¸ç¯„åœ: 25000 - 40000

40000 â”¤  â•±â•²â•±â•²â•±â•²     â† MLX3 (+5000 åç§»)
      â”‚ â•±  â•²  â•²
37000 â”¤â•±    â•²   â•²   â† MLX2 (+2000 åç§»)
      â”‚      â•²
34000 â”¤       â•²     â† MLX1 (+0 åç§»)
      â”‚        â•²
31000 â”¤         â•²   â† MLX0 (-3000 åç§»)
      â”‚
28000 â”¤
      â”‚
25000 â”¤
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ™‚é–“

æ¸…æ¥šå€åˆ† 4 æ¢æ³¢å½¢ï¼âœ…
```

---

## ğŸ’¡ è§£æ±ºæ–¹æ¡ˆæ¯”è¼ƒ

### æ–¹æ¡ˆ Aï¼šæ•¸å€¼åç§»ï¼ˆå·²æ¡ç”¨ï¼‰âœ…

**åŸç†**ï¼šåœ¨é¡¯ç¤ºæ™‚å°æ¯æ¢æ³¢å½¢çš„ Y å€¼åŠ ä¸Šåç§»é‡

```dart
// åŸå§‹å€¼
mlx0X = 32768

// é¡¯ç¤ºå€¼ï¼ˆåŠ ä¸Šåç§»ï¼‰
displayValue = mlx0X + offset  // 32768 + (-3000) = 29768
```

**å„ªé»**ï¼š
- âœ… ä¸ä¿®æ”¹åŸå§‹è³‡æ–™
- âœ… å³æ™‚èª¿æ•´ï¼Œç«‹å³ç”Ÿæ•ˆ
- âœ… å¯é€†æ“ä½œï¼ˆéš¨æ™‚é‡ç½®ï¼‰
- âœ… UI å¯¦ä½œç°¡å–®

**ç¼ºé»**ï¼š
- âš ï¸ Y è»¸åˆ»åº¦æœƒè®Šå¤§ï¼ˆéœ€è¦æ›´å¤§ç¯„åœï¼‰
- âš ï¸ æ¯æ¢æ³¢å½¢çš„å¯¦éš›æ•¸å€¼è¢«éš±è—

### æ–¹æ¡ˆ Bï¼šè‡ªå‹•ç¸®æ”¾ï¼ˆæœªæ¡ç”¨ï¼‰

**åŸç†**ï¼šè‡ªå‹•èª¿æ•´åœ–è¡¨ Y è»¸ç¯„åœé©æ‡‰æ‰€æœ‰æ³¢å½¢

**å„ªé»**ï¼š
- âœ… è‡ªå‹•åŒ–ï¼Œç„¡éœ€æ‰‹å‹•èª¿æ•´

**ç¼ºé»**ï¼š
- âŒ ç„¡æ³•æ§åˆ¶é–“è·
- âŒ æ³¢å½¢å¯èƒ½ä»ç„¶é‡ç–Š
- âŒ å‹•æ…‹ç¯„åœè®ŠåŒ–å½±éŸ¿é–±è®€

### æ–¹æ¡ˆ Cï¼šå¤šå­åœ–ï¼ˆæœªæ¡ç”¨ï¼‰

**åŸç†**ï¼šæ¯å€‹æ„Ÿæ¸¬å™¨ä½¿ç”¨ç¨ç«‹çš„å­åœ–è¡¨

**å„ªé»**ï¼š
- âœ… å®Œå…¨åˆ†é›¢ï¼Œçµ•ä¸é‡ç–Š

**ç¼ºé»**ï¼š
- âŒ ç„¡æ³•æ¯”è¼ƒç›¸å°è¶¨å‹¢
- âŒ è¢å¹•ç©ºé–“åˆ©ç”¨ç‡ä½
- âŒ å¯¦ä½œè¤‡é›œåº¦é«˜

---

## âœ… å¯¦ä½œå…§å®¹

### æ¶æ§‹è¨­è¨ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MlxChartView (StatefulWidget)             â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  State:                             â”‚  â”‚
â”‚  â”‚  - Map<String, double> _offsets     â”‚  â”‚
â”‚  â”‚    {                                â”‚  â”‚
â”‚  â”‚      'MLX0-X': -3000.0,            â”‚  â”‚
â”‚  â”‚      'MLX1-X': 0.0,                â”‚  â”‚
â”‚  â”‚      'MLX2-X': 2000.0,             â”‚  â”‚
â”‚  â”‚      'MLX3-X': 5000.0,             â”‚  â”‚
â”‚  â”‚    }                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  UI:                                â”‚  â”‚
â”‚  â”‚  - åç§»æ§åˆ¶æŒ‰éˆ•ï¼ˆé¡¯ç¤º/éš±è—ï¼‰          â”‚  â”‚
â”‚  â”‚  - åç§»æ§åˆ¶é¢æ¿ï¼ˆå¯æ²å‹•ï¼‰             â”‚  â”‚
â”‚  â”‚  - é‡ç½®æŒ‰éˆ•                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Chart:                             â”‚  â”‚
â”‚  â”‚  - æ¯æ¢ç·šçš„ Y å€¼ = åŸå§‹å€¼ + offset   â”‚  â”‚
â”‚  â”‚  - å³æ™‚æ›´æ–°é¡¯ç¤º                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 1. ç‹€æ…‹ç®¡ç†

**æª”æ¡ˆ**: `lib/presentation/view/mlx_chart_view.dart`

#### åç§»é‡å„²å­˜

```dart
class _MlxChartViewState extends State<MlxChartView> {
  // åç§»é‡è¨­å®šï¼ˆkey: 'MLX0-X', 'MLX1-X', etc.ï¼‰
  final Map<String, double> _offsets = {
    'MLX0-X': 0.0,
    'MLX1-X': 0.0,
    'MLX2-X': 0.0,
    'MLX3-X': 0.0,
  };

  // æ˜¯å¦é¡¯ç¤ºåç§»æ§åˆ¶é¢æ¿
  bool _showOffsetControls = false;
}
```

**ç‚ºä»€éº¼ä½¿ç”¨ Mapï¼Ÿ**
- âœ… æ¸…æ¥šçš„ key-value å°æ‡‰é—œä¿‚
- âœ… æ˜“æ–¼æ“´å±•ï¼ˆæœªä¾†å¯æ”¯æ´ Yã€Z è»¸ï¼‰
- âœ… é¡å‹å®‰å…¨ï¼ˆString key, double valueï¼‰

---

### 2. UI æ§åˆ¶é¢æ¿

#### åç§»æ§åˆ¶æŒ‰éˆ•

```dart
// åç§»æ§åˆ¶æŒ‰éˆ•ï¼ˆä½æ–¼ TabBar ä¸‹æ–¹ï¼‰
Padding(
  padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 2),
  child: Row(
    children: [
      // é¡¯ç¤º/éš±è—æŒ‰éˆ•
      ElevatedButton.icon(
        onPressed: () {
          setState(() {
            _showOffsetControls = !_showOffsetControls;
          });
        },
        icon: Icon(
          _showOffsetControls ? Icons.expand_less : Icons.tune,
          size: 16,
        ),
        label: Text(
          _showOffsetControls ? 'éš±è—åç§»æ§åˆ¶' : 'é¡¯ç¤ºåç§»æ§åˆ¶',
          style: const TextStyle(fontSize: 12),
        ),
      ),
      const SizedBox(width: 8),
      // é‡ç½®æŒ‰éˆ•ï¼ˆåƒ…åœ¨é¢æ¿é¡¯ç¤ºæ™‚å‡ºç¾ï¼‰
      if (_showOffsetControls)
        TextButton.icon(
          onPressed: () {
            setState(() {
              for (var key in _offsets.keys) {
                _offsets[key] = 0.0;
              }
            });
          },
          icon: const Icon(Icons.refresh, size: 16),
          label: const Text('é‡ç½®', style: TextStyle(fontSize: 12)),
        ),
    ],
  ),
),
```

#### åç§»æ§åˆ¶é¢æ¿ï¼ˆå¯æ²å‹•ï¼‰

```dart
// åç§»æ§åˆ¶é¢æ¿ï¼ˆé™åˆ¶æœ€å¤§é«˜åº¦ï¼Œé¿å… UI æº¢ä½ï¼‰
if (_showOffsetControls)
  ConstrainedBox(
    constraints: const BoxConstraints(maxHeight: 120),
    child: SingleChildScrollView(
      child: _buildOffsetControls(),
    ),
  ),
```

**ç‚ºä»€éº¼é™åˆ¶é«˜åº¦ï¼Ÿ**
- âœ… é¿å…æ©«ç‰ˆæ¨¡å¼ UI æº¢ä½
- âœ… æ²å‹•æŸ¥çœ‹æ‰€æœ‰æ§åˆ¶é …
- âœ… ä¿ç•™åœ–è¡¨é¡¯ç¤ºç©ºé–“

#### åç§»æ§åˆ¶é¢æ¿å…§å®¹

```dart
Widget _buildOffsetControls() {
  return Container(
    padding: const EdgeInsets.all(6),
    margin: const EdgeInsets.symmetric(horizontal: 4),
    decoration: BoxDecoration(
      color: Colors.grey.shade100,
      borderRadius: BorderRadius.circular(6),
    ),
    child: Column(
      mainAxisSize: MainAxisSize.min,
      children: [
        _buildOffsetRow('MLX0-X', 'MLX0 Xè»¸åç§»', Colors.blue),
        const SizedBox(height: 3),
        _buildOffsetRow('MLX1-X', 'MLX1 Xè»¸åç§»', Colors.red),
        const SizedBox(height: 3),
        _buildOffsetRow('MLX2-X', 'MLX2 Xè»¸åç§»', Colors.green),
        const SizedBox(height: 3),
        _buildOffsetRow('MLX3-X', 'MLX3 Xè»¸åç§»', Colors.orange),
      ],
    ),
  );
}
```

#### å–®ä¸€åç§»æ§åˆ¶è¡Œ

```dart
Widget _buildOffsetRow(String key, String label, Color color) {
  return Row(
    children: [
      // æ¨™ç±¤ï¼ˆé¡¯ç¤ºæ„Ÿæ¸¬å™¨åç¨±ï¼‰
      Container(
        width: 85,
        padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 3),
        decoration: BoxDecoration(
          color: color.withValues(alpha: 0.2),
          borderRadius: BorderRadius.circular(3),
        ),
        child: Text(
          label,
          style: TextStyle(
            color: color,
            fontWeight: FontWeight.bold,
            fontSize: 11,
          ),
        ),
      ),
      const SizedBox(width: 6),

      // -100 æŒ‰éˆ•
      _buildAdjustButton(key, -100, '-100'),

      // -10 æŒ‰éˆ•
      _buildAdjustButton(key, -10, '-10'),

      // é¡¯ç¤ºç•¶å‰åç§»å€¼
      Expanded(
        child: Container(
          padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 4),
          decoration: BoxDecoration(
            color: Colors.white,
            border: Border.all(color: Colors.grey.shade300),
            borderRadius: BorderRadius.circular(3),
          ),
          child: Text(
            _offsets[key]!.toInt().toString(),
            textAlign: TextAlign.center,
            style: const TextStyle(
              fontWeight: FontWeight.bold,
              fontSize: 11,
            ),
          ),
        ),
      ),

      // +10 æŒ‰éˆ•
      _buildAdjustButton(key, 10, '+10'),

      // +100 æŒ‰éˆ•
      _buildAdjustButton(key, 100, '+100'),
    ],
  );
}
```

**è¨­è¨ˆè€ƒé‡**ï¼š
- âœ… **ç²—èª¿ Â±100**ï¼šå¿«é€Ÿæ‹‰é–‹å¤§é–“è·
- âœ… **ç´°èª¿ Â±10**ï¼šå¾®èª¿å°é½Š
- âœ… **å³æ™‚é¡¯ç¤º**ï¼šä¸­å¤®é¡¯ç¤ºç•¶å‰åç§»å€¼
- âœ… **é¡è‰²æ¨™è¨˜**ï¼šèˆ‡æ³¢å½¢é¡è‰²å°æ‡‰

#### èª¿æ•´æŒ‰éˆ•

```dart
Widget _buildAdjustButton(String key, double delta, String label) {
  return Padding(
    padding: const EdgeInsets.symmetric(horizontal: 1.5),
    child: ElevatedButton(
      onPressed: () {
        setState(() {
          _offsets[key] = _offsets[key]! + delta;
        });
      },
      style: ElevatedButton.styleFrom(
        padding: const EdgeInsets.symmetric(horizontal: 6, vertical: 2),
        minimumSize: const Size(45, 26),
        tapTargetSize: MaterialTapTargetSize.shrinkWrap,
      ),
      child: Text(label, style: const TextStyle(fontSize: 10)),
    ),
  );
}
```

---

### 3. åœ–è¡¨é¡¯ç¤º

#### æ‡‰ç”¨åç§»é‡åˆ°æ³¢å½¢

```dart
Widget _buildAllChart(List<MlxSensorData> data) {
  return SfCartesianChart(
    title: ChartTitle(text: 'å…¨éƒ¨ MLX - X è»¸æ•¸æ“š'),
    legend: Legend(isVisible: true, position: LegendPosition.bottom),
    series: [
      // MLX0ï¼šåŸå§‹å€¼ + åç§»é‡
      _createLineSeries(
        data,
        'MLX0-X',
        (d) => d.mlx0X.toDouble() + _offsets['MLX0-X']!,
        Colors.blue,
      ),
      // MLX1ï¼šåŸå§‹å€¼ + åç§»é‡
      _createLineSeries(
        data,
        'MLX1-X',
        (d) => d.mlx1X.toDouble() + _offsets['MLX1-X']!,
        Colors.red,
      ),
      // MLX2ï¼šåŸå§‹å€¼ + åç§»é‡
      _createLineSeries(
        data,
        'MLX2-X',
        (d) => d.mlx2X.toDouble() + _offsets['MLX2-X']!,
        Colors.green,
      ),
      // MLX3ï¼šåŸå§‹å€¼ + åç§»é‡
      _createLineSeries(
        data,
        'MLX3-X',
        (d) => d.mlx3X.toDouble() + _offsets['MLX3-X']!,
        Colors.orange,
      ),
    ],
  );
}
```

**æ ¸å¿ƒé‚è¼¯**ï¼š
```dart
// yValueMapper å‡½å¼ä¸­åŠ å…¥åç§»é‡
(d) => d.mlx0X.toDouble() + _offsets['MLX0-X']!
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       åŸå§‹è³‡æ–™å€¼          åç§»é‡ï¼ˆå¯èª¿æ•´ï¼‰
```

---

## ğŸ¨ UI è¨­è¨ˆ

### ä½ˆå±€çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Card (åœ–è¡¨å®¹å™¨)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TabBar                             â”‚   â”‚
â”‚  â”‚  [å…¨éƒ¨] [MLX0] [MLX1] [MLX2] [MLX3] â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  [ğŸ›ï¸ é¡¯ç¤ºåç§»æ§åˆ¶] [ğŸ”„ é‡ç½®]         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ åç§»æ§åˆ¶é¢æ¿ï¼ˆå¯æ²å‹•ï¼‰         â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ MLX0 [-100][-10] 0 [+10][+100]â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ MLX1 [-100][-10] 0 [+10][+100]â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ MLX2 [-100][-10] 0 [+10][+100]â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ MLX3 [-100][-10] 0 [+10][+100]â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚      åœ–è¡¨é¡¯ç¤ºå€åŸŸ              â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚   (æ³¢å½¢å·²å¥—ç”¨åç§»)             â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                               â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç©ºé–“å„ªåŒ–

**æ©«ç‰ˆæ¨¡å¼çš„æŒ‘æˆ°**ï¼š
- å‚ç›´ç©ºé–“æœ‰é™ï¼ˆç´„ 600pxï¼‰
- TabBarï¼š48px
- åç§»æŒ‰éˆ•ï¼š30px
- åç§»é¢æ¿ï¼ˆå±•é–‹æ™‚ï¼‰ï¼š120px
- å‰©é¤˜çµ¦åœ–è¡¨ï¼šç´„ 400px

**å„ªåŒ–ç­–ç•¥**ï¼š
1. **é™åˆ¶é¢æ¿é«˜åº¦** (`maxHeight: 120px`)
2. **å¯æ²å‹•è¨­è¨ˆ** (`SingleChildScrollView`)
3. **ç·Šæ¹Šçš„æŒ‰éˆ•** (å° padding, å°å­—é«”)
4. **å¯æ”¶åˆé¢æ¿** (é»æ“Šéš±è—é‡‹æ”¾ç©ºé–“)

---

## ğŸ“Š ä½¿ç”¨ç¯„ä¾‹

### å…¸å‹ä½¿ç”¨å ´æ™¯

#### å ´æ™¯ 1ï¼šæ³¢å½¢å®Œå…¨é‡ç–Š

**åˆå§‹ç‹€æ…‹**ï¼š
```
æ‰€æœ‰ MLX çš„ X è»¸å€¼éƒ½åœ¨ 32000-33000 ç¯„åœ
â†’ 4 æ¢æ³¢å½¢å®Œå…¨é‡ç–Š
```

**èª¿æ•´æ­¥é©Ÿ**ï¼š
1. é»æ“Šã€Œé¡¯ç¤ºåç§»æ§åˆ¶ã€
2. MLX0 è¨­ç‚º **-3000**ï¼ˆå‘ä¸‹åç§»ï¼‰
3. MLX1 ä¿æŒ **0**ï¼ˆä¸åç§»ï¼‰
4. MLX2 è¨­ç‚º **+2000**ï¼ˆå‘ä¸Šåç§»ï¼‰
5. MLX3 è¨­ç‚º **+5000**ï¼ˆå‘ä¸Šåç§»ï¼‰

**çµæœ**ï¼š
```
MLX3: 37000-38000 (æœ€ä¸Šæ–¹) âœ…
MLX2: 34000-35000          âœ…
MLX1: 32000-33000          âœ…
MLX0: 29000-30000 (æœ€ä¸‹æ–¹) âœ…

4 æ¢æ³¢å½¢æ¸…æ¥šåˆ†é›¢ï¼
```

#### å ´æ™¯ 2ï¼šéƒ¨åˆ†é‡ç–Š

**åˆå§‹ç‹€æ…‹**ï¼š
```
MLX0, MLX1: 32000-33000 (é‡ç–Š)
MLX2, MLX3: 35000-36000 (é‡ç–Š)
```

**èª¿æ•´æ­¥é©Ÿ**ï¼š
1. MLX0 è¨­ç‚º **-1000**
2. MLX1 è¨­ç‚º **+1000**
3. MLX2 è¨­ç‚º **-1000**
4. MLX3 è¨­ç‚º **+1000**

**çµæœ**ï¼š
```
MLX3: 36000-37000 âœ…
MLX2: 34000-35000 âœ…
MLX1: 33000-34000 âœ…
MLX0: 31000-32000 âœ…

æ‰€æœ‰æ³¢å½¢å‡å‹»åˆ†å¸ƒï¼
```

---

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### setState è§¸ç™¼æ©Ÿåˆ¶

```dart
// æ¯æ¬¡èª¿æ•´åç§»é‡æ™‚è§¸ç™¼é‡ç¹ª
setState(() {
  _offsets[key] = _offsets[key]! + delta;
});
// â†“
// Widget é‡å»º
// â†“
// åœ–è¡¨é‡æ–°è¨ˆç®— Y å€¼
// â†“
// æ³¢å½¢å³æ™‚æ›´æ–° âœ…
```

### åç§»é‡è¨ˆç®—

```dart
// Syncfusion Chart çš„ yValueMapper
yValueMapper: (MlxSensorData d, _) => d.mlx0X.toDouble() + _offsets['MLX0-X']!
                                      â””â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      åŸå§‹å€¼ (int)         åç§»é‡ (double)

// ç¯„ä¾‹ï¼š
// d.mlx0X = 32768
// _offsets['MLX0-X'] = -3000.0
// é¡¯ç¤ºå€¼ = 32768 + (-3000) = 29768 âœ…
```

### è³‡æ–™ä¸è®Šæ€§

**é‡è¦**ï¼šåç§»é‡**åƒ…å½±éŸ¿é¡¯ç¤º**ï¼Œä¸ä¿®æ”¹åŸå§‹è³‡æ–™

```dart
// âœ… åŸå§‹è³‡æ–™ä¿æŒä¸è®Š
MlxSensorData(mlx0X: 32768, ...)  // å„²å­˜çš„å€¼

// âœ… åƒ…åœ¨ç¹ªåœ–æ™‚åŠ å…¥åç§»
displayValue = 32768 + (-3000) = 29768  // é¡¯ç¤ºçš„å€¼

// âœ… åŒ¯å‡º CSV æ™‚ä½¿ç”¨åŸå§‹å€¼
csv: "32768"  // ä¸åŒ…å«åç§»é‡
```

---

## âœ… æ¸¬è©¦çµæœ

### åŠŸèƒ½æ¸¬è©¦

| é …ç›® | æ¸¬è©¦å…§å®¹ | çµæœ |
|------|---------|------|
| **åç§»èª¿æ•´** | é»æ“Š Â±10, Â±100 æŒ‰éˆ• | âœ… å³æ™‚ç”Ÿæ•ˆ |
| **é‡ç½®åŠŸèƒ½** | é»æ“Šã€Œé‡ç½®ã€æŒ‰éˆ• | âœ… æ‰€æœ‰åç§»æ­¸é›¶ |
| **é¢æ¿æ”¶åˆ** | éš±è—/é¡¯ç¤ºæ§åˆ¶é¢æ¿ | âœ… é‡‹æ”¾ç©ºé–“ |
| **æ³¢å½¢åˆ†é›¢** | 4 æ¢é‡ç–Šæ³¢å½¢èª¿æ•´ | âœ… æ¸…æ¥šå€åˆ† |
| **UI æº¢ä½** | æ©«ç‰ˆæ¨¡å¼å±•é–‹é¢æ¿ | âœ… å¯æ²å‹•ï¼Œç„¡æº¢ä½ |
| **è³‡æ–™å®Œæ•´æ€§** | åŒ¯å‡º CSV æª¢æŸ¥ | âœ… åŸå§‹å€¼æœªæ”¹è®Š |

### æ•ˆèƒ½æ¸¬è©¦

| é …ç›® | æ¸¬è©¦æ¢ä»¶ | çµæœ |
|------|---------|------|
| **èª¿æ•´å»¶é²** | å¿«é€Ÿé»æ“Š Â±10 æŒ‰éˆ• | < 16ms (60 FPS) âœ… |
| **åœ–è¡¨é‡ç¹ª** | setState è§¸ç™¼é‡ç¹ª | < 16ms (60 FPS) âœ… |
| **è¨˜æ†¶é«”** | 3000 ç­†è³‡æ–™ + åç§» | ç„¡å¢åŠ  âœ… |

### Mock æ¨¡å¼æ¸¬è©¦

```bash
flutter run
```

**æ¸¬è©¦æ­¥é©Ÿ**ï¼š
1. å•Ÿå‹• Mock æ¨¡å¼ï¼ˆå¿«é€Ÿæ³¢å½¢ï¼‰
2. åˆ‡æ›åˆ°ã€Œå…¨éƒ¨ã€åˆ†é 
3. è§€å¯Ÿ 4 æ¢æ³¢å½¢é‡ç–Šæƒ…æ³
4. é»æ“Šã€Œé¡¯ç¤ºåç§»æ§åˆ¶ã€
5. èª¿æ•´å„æ„Ÿæ¸¬å™¨åç§»é‡ï¼š
   - MLX0: -3000
   - MLX1: 0
   - MLX2: +2000
   - MLX3: +5000
6. ç¢ºèªæ³¢å½¢æ¸…æ¥šåˆ†é›¢ âœ…
7. é»æ“Šã€Œé‡ç½®ã€ç¢ºèªæ­¸é›¶ âœ…
8. é»æ“Šã€Œéš±è—åç§»æ§åˆ¶ã€ç¢ºèªç©ºé–“é‡‹æ”¾ âœ…

---

## ğŸ“‹ ä¿®æ­£æ‘˜è¦

| é …ç›® | ä¿®æ­£å‰ | ä¿®æ­£å¾Œ | æ”¹é€² |
|------|--------|--------|------|
| **æ³¢å½¢é‡ç–Š** | âŒ ç„¡æ³•å€åˆ† | âœ… å¯èª¿æ•´åˆ†é›¢ | âœ… å¯è¦–åŒ–æ”¹å–„ |
| **åç§»åŠŸèƒ½** | âŒ ç„¡ | âœ… 4 å€‹ç¨ç«‹æ§åˆ¶ | âœ… æ–°å¢åŠŸèƒ½ |
| **èª¿æ•´ç²¾åº¦** | - | âœ… ç²—èª¿ Â±100, ç´°èª¿ Â±10 | âœ… éˆæ´»èª¿æ•´ |
| **é‡ç½®åŠŸèƒ½** | - | âœ… ä¸€éµæ­¸é›¶ | âœ… ä¾¿åˆ©æ€§ |
| **UI ç©ºé–“** | - | âœ… å¯æ”¶åˆé¢æ¿ | âœ… ç©ºé–“å„ªåŒ– |
| **è³‡æ–™å®Œæ•´æ€§** | - | âœ… ä¸å½±éŸ¿åŸå§‹å€¼ | âœ… å®‰å…¨æ€§ |

---

## ğŸ“ ä¿®æ”¹æª”æ¡ˆ

### æ–°å¢åŠŸèƒ½
- âœ… `lib/presentation/view/mlx_chart_view.dart`
  - æ–°å¢ `_offsets` Map å„²å­˜åç§»é‡
  - æ–°å¢ `_showOffsetControls` æ§åˆ¶é¢æ¿é¡¯ç¤º
  - æ–°å¢ `_buildOffsetControls()` å»ºç«‹æ§åˆ¶é¢æ¿
  - æ–°å¢ `_buildOffsetRow()` å»ºç«‹å–®ä¸€æ§åˆ¶è¡Œ
  - æ–°å¢ `_buildAdjustButton()` å»ºç«‹èª¿æ•´æŒ‰éˆ•
  - ä¿®æ”¹ `_buildAllChart()` å¥—ç”¨åç§»é‡

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### çµ¦ä½¿ç”¨è€…

1. **é–‹å•Ÿåç§»æ§åˆ¶**ï¼š
   - åœ¨åœ–è¡¨å€åŸŸé»æ“Šã€Œé¡¯ç¤ºåç§»æ§åˆ¶ã€æŒ‰éˆ•

2. **èª¿æ•´åç§»é‡**ï¼š
   - **å¿«é€Ÿèª¿æ•´**ï¼šé»æ“Š -100 æˆ– +100
   - **ç²¾ç´°èª¿æ•´**ï¼šé»æ“Š -10 æˆ– +10
   - **è§€å¯Ÿä¸­å¤®æ•¸å€¼**ï¼šå³æ™‚æŸ¥çœ‹ç•¶å‰åç§»é‡

3. **è§€å¯Ÿæ•ˆæœ**ï¼š
   - åœ–è¡¨å³æ™‚æ›´æ–°
   - æ³¢å½¢ä¸Šä¸‹ç§»å‹•

4. **é‡ç½®åç§»**ï¼š
   - é»æ“Šã€Œé‡ç½®ã€æŒ‰éˆ•
   - æ‰€æœ‰åç§»é‡æ­¸é›¶

5. **éš±è—æ§åˆ¶**ï¼š
   - èª¿æ•´å®Œæˆå¾Œé»æ“Šã€Œéš±è—åç§»æ§åˆ¶ã€
   - é‡‹æ”¾è¢å¹•ç©ºé–“çµ¦åœ–è¡¨

### çµ¦é–‹ç™¼è€…

#### æ“´å±•åˆ°å…¶ä»–è»¸å‘

ç›®å‰åªæ”¯æ´ X è»¸åç§»ï¼Œæœªä¾†å¯æ“´å±•åˆ° Yã€Z è»¸ï¼š

```dart
// æ“´å±•åç§»é‡ Map
final Map<String, double> _offsets = {
  // X è»¸
  'MLX0-X': 0.0,
  'MLX1-X': 0.0,
  'MLX2-X': 0.0,
  'MLX3-X': 0.0,

  // Y è»¸
  'MLX0-Y': 0.0,
  'MLX1-Y': 0.0,
  'MLX2-Y': 0.0,
  'MLX3-Y': 0.0,

  // Z è»¸
  'MLX0-Z': 0.0,
  'MLX1-Z': 0.0,
  'MLX2-Z': 0.0,
  'MLX3-Z': 0.0,
};

// åœ¨å–®ä¸€ MLX åœ–è¡¨ä¸­å¥—ç”¨
series = [
  _createLineSeries(data, 'X è»¸', (d) => d.mlx0X.toDouble() + _offsets['MLX0-X']!, xAxisColor),
  _createLineSeries(data, 'Y è»¸', (d) => d.mlx0Y.toDouble() + _offsets['MLX0-Y']!, yAxisColor),
  _createLineSeries(data, 'Z è»¸', (d) => d.mlx0Z.toDouble() + _offsets['MLX0-Z']!, zAxisColor),
];
```

#### æŒä¹…åŒ–åç§»è¨­å®š

å¯ä½¿ç”¨ `shared_preferences` å„²å­˜åç§»é‡ï¼š

```dart
// å„²å­˜
Future<void> _saveOffsets() async {
  final prefs = await SharedPreferences.getInstance();
  _offsets.forEach((key, value) {
    prefs.setDouble(key, value);
  });
}

// è®€å–
Future<void> _loadOffsets() async {
  final prefs = await SharedPreferences.getInstance();
  setState(() {
    _offsets.forEach((key, _) {
      _offsets[key] = prefs.getDouble(key) ?? 0.0;
    });
  });
}
```

---

## ğŸ’¡ æœ€ä½³å¯¦è¸

### å»ºè­°çš„åç§»é‡è¨­å®š

#### å‡å‹»åˆ†å¸ƒï¼ˆæ¨è–¦ï¼‰
```dart
MLX0: -3000
MLX1: -1000
MLX2: +1000
MLX3: +3000

é–“è·: 2000
ç¸½ç¯„åœ: 6000
```

#### ç·Šæ¹Šåˆ†å¸ƒ
```dart
MLX0: -1500
MLX1: -500
MLX2: +500
MLX3: +1500

é–“è·: 1000
ç¸½ç¯„åœ: 3000
```

#### åˆ†çµ„åˆ†å¸ƒ
```dart
# ä¸Šçµ„
MLX2: +3000
MLX3: +2000

# ä¸‹çµ„
MLX0: -2000
MLX1: -3000

é©åˆæ¯”è¼ƒå…©çµ„å·®ç•°
```

### èª¿æ•´æŠ€å·§

1. **å…ˆç²—èª¿å¾Œç´°èª¿**ï¼š
   - å…ˆç”¨ Â±100 å¿«é€Ÿæ‹‰é–‹é–“è·
   - å†ç”¨ Â±10 å¾®èª¿å°é½Š

2. **ä¿ç•™åŸºæº–ç·š**ï¼š
   - è‡³å°‘ä¿æŒä¸€å€‹æ„Ÿæ¸¬å™¨åç§»ç‚º 0
   - ä½œç‚ºå…¶ä»–æ„Ÿæ¸¬å™¨çš„åƒè€ƒåŸºæº–

3. **å°ç¨±åˆ†å¸ƒ**ï¼š
   - æ­£è² å°ç¨±åˆ†å¸ƒï¼ˆå¦‚ -2000, 0, +2000ï¼‰
   - è¦–è¦ºä¸Šæ›´å¹³è¡¡

---

## ğŸ“ å‚™è¨»

### è¨­è¨ˆæ±ºç­–

1. **ç‚ºä½•åªæ”¯æ´ X è»¸ï¼Ÿ**
   - X è»¸æ˜¯ä¸»è¦è§€æ¸¬è»¸å‘
   - é¿å… UI éæ–¼è¤‡é›œ
   - æœªä¾†å¯æ“´å±•åˆ° Yã€Z è»¸

2. **ç‚ºä½•ä½¿ç”¨ Â±10, Â±100ï¼Ÿ**
   - è³‡æ–™ç¯„åœé€šå¸¸åœ¨ 30000-35000
   - Â±100 é©åˆå¿«é€Ÿæ‹‰é–‹é–“è·ï¼ˆç´„ 2% ç¯„åœï¼‰
   - Â±10 é©åˆå¾®èª¿ï¼ˆç´„ 0.2% ç¯„åœï¼‰

3. **ç‚ºä½•ä¸è‡ªå‹•è¨ˆç®—æœ€ä½³åç§»ï¼Ÿ**
   - ä½¿ç”¨è€…å ´æ™¯å·®ç•°å¤§
   - æ‰‹å‹•èª¿æ•´æ›´éˆæ´»
   - ä¿ç•™ä½¿ç”¨è€…æ§åˆ¶æ¬Š

### å·²çŸ¥é™åˆ¶

1. **åç§»é‡ä¸æŒä¹…åŒ–**ï¼šé‡å•Ÿ App å¾Œåç§»é‡é‡ç½®
2. **åƒ…æ”¯æ´ X è»¸**ï¼šYã€Z è»¸éœ€æ‰‹å‹•æ“´å±•
3. **ç„¡åç§»é‡é è¨­é›†**ï¼šç„¡æ³•å„²å­˜å¸¸ç”¨é…ç½®

### å¾ŒçºŒæ”¹é€²å»ºè­°

1. **åç§»é‡é è¨­é›†**ï¼š
   ```dart
   // é è¨­é…ç½®
   final presets = {
     'å‡å‹»åˆ†å¸ƒ': {'MLX0-X': -3000, 'MLX1-X': -1000, ...},
     'ç·Šæ¹Šåˆ†å¸ƒ': {'MLX0-X': -1500, 'MLX1-X': -500, ...},
   };
   ```

2. **è‡ªå‹•è¨ˆç®—å»ºè­°**ï¼š
   - åˆ†æè³‡æ–™ç¯„åœ
   - å»ºè­°æœ€ä½³åç§»é‡
   - ä¸€éµå¥—ç”¨

3. **åç§»é‡è¼¸å…¥æ¡†**ï¼š
   - é™¤äº† Â±10, Â±100 æŒ‰éˆ•
   - å¢åŠ ç›´æ¥è¼¸å…¥æ•¸å€¼åŠŸèƒ½

4. **è¦–è¦ºåŒ–è¼”åŠ©**ï¼š
   - åœ¨åœ–è¡¨ä¸Šé¡¯ç¤ºåç§»é‡æ¨™è¨˜
   - è™›ç·šé¡¯ç¤ºåŸå§‹ä½ç½®

---

**å¯¦ä½œå®Œæˆæ—¥æœŸ**: 2025-12-21
**æ¸¬è©¦ç‹€æ…‹**: âœ… åŠŸèƒ½æ¸¬è©¦é€šé
**åŠŸèƒ½ç‹€æ…‹**: âœ… å®Œæ•´å¯¦ä½œï¼Œç”Ÿç”¢ç’°å¢ƒå¯ç”¨
**UI ç‹€æ…‹**: âœ… æ©«ç‰ˆ/ç›´æ¿æ¨¡å¼éƒ½æ”¯æ´
